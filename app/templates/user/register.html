<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用户注册</title>
    <link rel="stylesheet" href="{{ url_for('static',filename='bootstrap/css/bootstrap.css') }}">
    <link href="{{ url_for('static',filename='bootstrap/css/style.css') }}" rel="stylesheet">
    <link href="{{ url_for('static',filename='img/icon.jpg') }}" rel="shortcut icon" type="image/x-icon">
    <style>
    body{
        height:100px;
        background-color:#F4F4F4;
    }



    </style>
</head>
<body>
<div>
    <div class="container-fluid">
        <div class="row clearfix">
            <div class="col-md-2"></div>
            <div class="col-md-10 column">
                <div>
                    <br><br>
                    <div class="col-sm-9">
                        <h1>
                            如艺剧本
                        </h1>
                    </div>
                    <div class="col-sm-1"><br>
                        <a href="{{url_for('user.login')}}" class="btn btn-primary">登录</a>
                    </div>
                </div>
            </div>
        </div>
        <br>
    </div>
    <div>
        <div class="row clearfix" id="regform"
             style="background-image:url('/static/img/background.jpg');min-height:730px">
            <br><br><br><br><br><br>
            <div class="col-md-7 column">
            </div>
            <div class="col-md-4 column" style="background-color:#fff;height:500px">
                <br><br>
                <h3 class="text-center">
                    用户注册
                </h3><br/>
                <form class="form-horizontal" role="form" id="registerForm" method="post"
                      action="{{url_for('user.register')}}">
                    <div class="form-group">
                        <label for="email" class="col-sm-3 control-label">邮箱：</label>
                        <div class="col-sm-7">
                            <input type="text" name="email" id="email" class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="username" class="col-sm-3 control-label">用户名：</label>
                        <div class="col-sm-7">
                            <input type="text" name="username" id="username" class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="password" class="col-sm-3 control-label">密码：</label>
                        <div class="col-sm-7">
                            <input type="password" name="password" id="password" class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="confirmpassword" class="col-sm-3 control-label">确认密码：</label>
                        <div class="col-sm-7">
                            <input type="password" name="confirmpassword" id="confirmpassword" class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="confirmcode" class="col-sm-3  control-label">验证码：</label>
                        <div class="col-sm-3">
                            <input type="text" name="confirmcode" id="confirmcode" class="form-control">
                        </div>
                        <div class="col-sm-4">
                            <label class="control-label" style="margin:0"><img
                                    src="{{ url_for('static',filename='img/code/'+strs+'.jpg')}}"></label>
                        </div>
                    </div>
                    <!--注册时指定身份为公司的管理员为公司注册账号或编剧演员等普通身份-->
                    <div class="form-group">
                        <label class="col-sm-3"></label>
                        <h4>
                            <label class="checkbox-inline">
                                <input type="radio" name="userRole" value="companyAdmin">&nbsp&nbsp公司管理员
                            </label>
                            <label class="checkbox-inline">
                                <input type="radio" name="userRole" value="companyStaff"  checked>&nbsp&nbsp普通用户
                            </label>
                        </h4>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-3">
                        </div>
                        <div class="col-sm-4">
                            <h4>&nbsp&nbsp<input type="checkbox" id="agreeProtlcol" name="agreeProtlcol" checked>&nbsp&nbsp&nbsp&nbsp同意<a
                                    href="{{url_for('user.register_protocol')}}" target="_blank">用户注册协议</a></h4>
                        </div>
                    </div>
                    <div class="form-group">
                    <span class="col-sm-3">
                    </span>
                        <span class="col-sm-7">
                        <input type="submit" class="btn btn-primary btn-block" value="注册">
                    </span>
                    </div>
                </form>
            </div>
            <div class="col-md-3 column">
            </div>
        </div>
    </div>
</div>
<script src="{{ url_for('static',filename='js/jquery-3.2.1.js') }}"></script>
<script src="{{ url_for('static',filename='js/jquery.validate.js') }}"></script>
<script>
    $(document).ready(function(){
        var validator;
        validator = $("#registerForm").validate({
            rules:{
                username:{
                    required:true,
                    minlength:2,
                    maxlength:20,
                    remote:{
                        url:"{{url_for('user.registerValidateUsername')}}",
                        type:"post",
                        data:{
                            username:function(){return $("#username").val();}
                        }
                    }
                },
                email:{
                    required:true,
                    email:true,
                    minlength:6,
                    maxlength:20,
                    remote:{
                        url:"{{url_for('user.validateemail')}}",
                        type:"post",
                        data:{
                            email:function(){return $("#email").val();}
                        }
                    }
                },
                password:{
                    required:true,
                    minlength:6,
                    maxlength:15
                },
                confirmpassword:{
                    equalTo:"#password"
                },
                confirmcode:{
                    required:true,
                    rangelength:[4,4],
                    remote:{
                        url:"{{url_for('user.validateconfirmcode')}}",
                        type:"post",
                        data:{
                            confirmcode:function(){return $("#confirmcode").val();}
                        }
                    }
                },
                agreeProtlcol:{
                    required:true
                }
            },
            messages:{
                username:{
                    required:"用户名必填",
                    minlength:"最小长度为3",
                    maxlength:"最大长度为20",
                    remote:"用户名已存在"
                },
                email:{
                    required:"邮箱必填",
                    minlength:"最小长度为6",
                    maxlength:"最大长度为20",
                    email:"邮箱格式不正确",
                    remote:"邮箱已注册"
                },
                password:{
                    required:"密码必填",
                    minlength:"密码最小长度为6",
                    maxlength:"密码最大长度为15"
                },
                confirmpassword:{
                    equalTo:"两次密码输入不一致"
                },
                confirmcode:{
                    required:"请填写验证码",
                    rangelength:"请输入4位验证码",
                    remote:"验证码不正确"
                },
                agreeProtlcol:{
                    required:"请同意用户协议后再注册"
                }
            },
            errorPlacement: function(error, element) {
                error.appendTo( element.parent() );
            }
        });
    });



</script>
</body>
</html>

